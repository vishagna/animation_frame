<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pixel Perfect Animation Preview</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
<div class="wrap">

  <!-- Export GIF Modal -->
  <div class="overlay" id="exportGifModal">
    <div class="modal-box">
      <h3>Export GIF</h3>
      <div class="modal-row">
        <label>Scale (1-10):</label>
        <input type="number" id="gifScale" value="10" min="1" max="10">
      </div>
      <div class="modal-row">
        <label>FPS:</label>
        <input type="number" id="gifFps" value="12" min="1" max="60">
      </div>
      <div class="modal-row">
        <label>Background:</label>
        <label><input type="radio" name="gifBg" value="trans" checked> Transparent</label>
        <label><input type="radio" name="gifBg" value="color"> Color</label>
        <input type="color" id="gifBgColor" value="#000000">
      </div>
      <div class="modal-actions">
        <button id="cancelGifExport" class="ghost">Cancel</button>
        <button id="confirmGifExport" class="success">Export</button>
      </div>
    </div>
  </div>

    <!-- Export Sprite Sheet Modal -->
  <div class="overlay" id="exportSpriteModal">
    <div class="modal-box">
      <h3>Export Sprite Sheet</h3>
      <div class="modal-row">
        <label>Scale (1-10):</label>
        <input type="number" id="spriteScale" value="1" min="1" max="10">
      </div>
      <div class="modal-row">
        <label>Background:</label>
        <label><input type="radio" name="spriteBg" value="trans" checked> Transparent</label>
        <label><input type="radio" name="spriteBg" value="color"> Color</label>
        <input type="color" id="spriteBgColor" value="#000000">
      </div>
      <div class="modal-actions">
        <button id="cancelSpriteExport" class="ghost">Cancel</button>
        <button id="confirmSpriteExport" class="success">Export</button>
      </div>
    </div>
  </div>



  <!-- LEFT: Groups & Frames -->
  <div class="panel">
    <div class="group-header">
      <h2>Groups</h2>
      <div class="group-add">
        <input id="newGroupName" placeholder="New group">
        <button id="addGroupBtn" class="small">Add</button>
      </div>
    </div>

    <!-- Groups list (dọc) -->
    <div class="groups" id="groupsList"></div>

    <!-- Drop / File input -->
    <div class="drop" id="drop">
      Drop images here or
      <label>
        <input id="fileInput" type="file" accept="image/*" multiple>
        choose files
      </label>
    </div>

    <!-- Controls -->
    <div class="controls-top">
      <div class="fps-control">
        <label for="fps">FPS</label>
        <input id="fps" type="number" min="1" value="12">
      </div>
      <div class="frame-actions">
        <button id="sortBtn" class="ghost small">Sort (name)</button>
        <button id="clearAll" class="ghost small">Clear all</button>
      </div>
    </div>

    <!-- Frames list -->
    <div class="frames" id="framesList"></div>
    <div id="framesEmpty" class="frames-empty">Select a group to see its frames.</div>

    <div class="footer">Drag to reorder frames inside a group.</div>
  </div>

  <!-- RIGHT: Preview / Export -->
  <div class="panel preview-wrap">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
      <h2 style="margin:0">Preview</h2>
      <div style="display:flex;gap:8px">
        <button id="openExportModalBtn" class="success small">Export GIF</button>
        <button id="exportSpriteBtn" class="success small">Export Sprite Sheet</button>
      </div>
    </div>

    <div class="canvas-container checkerboard" id="canvasContainer">
      <canvas id="canvas" class="preview-canvas"></canvas>
    </div>

    <div class="preview-controls">
      <button id="playPause">Play</button>
      <button id="stepBack" class="ghost small">◀</button>
      <button id="stepForward" class="ghost small">▶</button>
      <label class="muted">Loop group</label><input id="loopGroup" type="checkbox" checked>
      <label class="muted">Auto switch group</label><input id="autoSwitchGroup" type="checkbox" checked>
      <div style="margin-left:auto;display:flex;gap:8px;align-items:center">
        <div class="muted">Frame:</div>
        <div id="frameIndex">0 / 0</div>
      </div>
    </div>

    <div class="bg-controls">
      <label style="font-weight:600">Background:</label>
      <label><input type="radio" name="bgType" value="trans" > Transparent</label>
      <label><input type="radio" name="bgType" value="color" checked> Color</label>
      <input type="color" id="bgColorPicker" value="#000000" >
    </div>

    <div id="emptyHint" class="list-empty">No frames loaded.</div>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/gif.js/0.2.0/gif.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
<script src="script.js"></script>
<script src="export_gif.js"></script>
<script src="export_spritesheet.js"></script>
</body>

</html>
